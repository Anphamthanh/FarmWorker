<div class="container">
  <h1><i class="fa fa-user-md fa-lg"></i> Student-BSN Dashboard</h1>
  <div class="container">
    <div class="panel panel-info">
      <div class="panel-heading">Patient Data</div>
      <div class="panel-body">
        <p>All patient's data is confidential.</p>
        <%= form_tag student_dashboard_path, :method => 'get', :class => "navbar-form", :role => "search" do %>
          <div class="input-group">
            <%= text_field_tag :search, params[:search], class: "form-control", placeholder: "Enter patient" %>
            <div class="input-group-btn">
              <button class="btn btn-default" type="submit"><i class="fa fa-search"></i></button>
              <button class="btn btn-default" type='reset'><i class="fa fa-times"></i></button>
            </div>
          </div>
        <% end %>
      </div>
      <table class="table">
      <tr>
        <th>Patient ID</th>
        <th>First name</th>
        <th>Last name</th>        
        <th>Gender</th>
        <th>DOB</th>
      </tr>
      <% @all_patients.each do |patient| %>
        <tr class='clickableRow' href='/patient/<%= "#{patient.id}" %>'>
          <td><%= patient.id %></td>
          <td><%= patient.first_name %></td>
          <td><%= patient.last_name %></td>
          <td><%= patient.gender %></td>
          <td><%= patient.dob %></td>
        </tr>
      <% end %>
      </table>
    </div>
    <%= will_paginate @all_patients, renderer: BootstrapPagination::Rails %>
  </div>
  <h2>New Patient</h2>
  <div class="container">
    <%= form_for(:patient, url: patient_path, :validate => true, :class => "form-horizontal") do |f| %>
      <div class="form-group row col-md-8">
        <div class="col-md-5">
          <%= f.label :first_name %>
        </div>
        <div class="col-md-7">
          <%= f.text_field :first_name, :class => "form-control", :placeholder => "First Name" %>
        </div>
      </div>
      <div class="form-group row col-md-8">
        <div class="col-md-5">
          <%= f.label :Middle_name %>
        </div>
        <div class="col-md-7">
          <%= f.text_field :middle_name, :class => "form-control", :placeholder => "Middle Name" %>
        </div>
      </div>
      <div class="form-group row col-md-8">
        <div class="col-md-5">
          <%= f.label :last_name %>
        </div>
        <div class="col-md-7">
          <%= f.text_field :last_name, :class => "form-control", :placeholder => "Last Name" %>
        </div>
      </div>
      <div class="form-group row col-md-8">
        <div class="col-md-5">
          <%= f.label :gender %>
        </div>
        <div class="col-md-7">
          <%= f.select :gender, options_for_select(["Male", "Female"]) %>
        </div>
      </div>
      <div class="form-group row col-md-8">
        <div class="col-md-5">
          <%= f.label(:dob, "DOB") %>
        </div>
        <div class="col-md-7">
          <%= f.date_select :dob, :start_year => 1950, :end_year => Date.today.year %>
        </div>
      </div>
      <div class="form-group row col-md-8">
        <div class="col-md-12"> 
          <button type="submit" class="btn btn-primary">Create</button>
        </div>
      </div>

    <% end %>
  </div>
</div>

<script>
  $(".clickableRow").click(function() {
    window.document.location = $(this).attr("href");
  });
  $("#student-bsn").addClass("active");
</script>
